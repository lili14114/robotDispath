*** Settings ***
Library           Selenium2Library
Library           Collections
Library           RequestsLibrary
Library           CustomLibrary
Resource          公共方法.txt
Variables         setting.py
Resource          简图调度.txt

*** Keywords ***
获取简图_车辆_路单明细
    [Arguments]    ${bustid}
    获取简图车辆更多菜单index    ${bustid}    &{dropdown_menuDict}[busReport]    -1
    sleep    1
    ${BusrecordStr}    get text    xpath=//div[@class='grid-table-body' and @style='width: 1170px; height: 320px; position: relative;']/table/tbody/tr    #获取行车记录明细内容。注意表单的元素位置应在tr结束，否则无法获取td中的内容.如果有多条明细时，默认输出第一条。输出格式为str类型
    ${BusrecordResultLst}    strTolist    ${BusrecordStr}    #将路单结果转换成List格式用于分析
    log    ${BusrecordResultLst}
    [Return]    ${BusrecordStr}    ${BusrecordResultLst}

获取简图下方路单明细并验证结果
    [Arguments]    @{targetLst}
    [Documentation]    @{targetLst}目标清单
    ...    例如：查询出所有路单记录，验证某台车的路单状态是否存在路单记录中。即目标清单['robot','运行中']
    ...
    ...    @{flag}返回bool值，如果查询出一的所有路单包含目标清单内容，则返回True，否则返回False
    #打开简图调度
    #切换简图domain_frame
    @{recordLst}    create list
    ${XPathCount}    get element count    css=#road_order_detail_grid1_417768025>div>table>tbody>tr>td>div[class="grid-body"]>div[class="grid-table-body"]>table>tbody>tr
    @{recordsXPath}    get webelements    css=#road_order_detail_grid1_417768025>div>table>tbody>tr>td>div[class="grid-body"]>div[class="grid-table-body"]>table>tbody>tr    #查询简图下方所有的路单
    log    ${XPathCount}
    FOR    ${recordXPath}    IN    @{recordsXPath}
    ${record}    get text    ${recordXPath}
    Append to list    ${recordLst}    ${record}    #将所有的路单结果装入列表中
    END
    log many    @{recordLst}
    log many    @{targetLst}
    ${flag}    should Contain multiValue    ${recordLst}    ${targetLst}
    [Return]    @{recordLst}    ${flag}
